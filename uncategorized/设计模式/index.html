<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="这个是读设计模式之禅的读书笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="设计模式">
<meta property="og:url" content="http://yoursite.com/uncategorized/设计模式/index.html">
<meta property="og:site_name" content="个人网站">
<meta property="og:description" content="这个是读设计模式之禅的读书笔记">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/uncategorized/设计模式/diagram-3798961331217258717.png">
<meta property="og:image" content="http://yoursite.com/uncategorized/设计模式/diagram-8826285099454707507.png">
<meta property="og:image" content="http://yoursite.com/diagram-3665263129162863714.png">
<meta property="og:image" content="http://yoursite.com/uncategorized/设计模式/diagram-571852663608358642.png">
<meta property="og:image" content="http://yoursite.com/uncategorized/设计模式/diagram-1634151465328182485.png">
<meta property="og:image" content="http://yoursite.com/uncategorized/设计模式/diagram-4102033608804864525.png">
<meta property="og:image" content="http://yoursite.com/uncategorized/设计模式/diagram-4437561749570370753.png">
<meta property="og:image" content="http://yoursite.com/uncategorized/设计模式/diagram-3780860177776319271.png">
<meta property="og:image" content="http://yoursite.com/uncategorized/设计模式/diagram-7547007178137678520.png">
<meta property="og:image" content="http://yoursite.com/uncategorized/设计模式/diagram-3601485860820498926.png">
<meta property="og:image" content="http://yoursite.com/uncategorized/设计模式/diagram-2081383269360776681.png">
<meta property="og:image" content="http://yoursite.com/uncategorized/设计模式/daili.png">
<meta property="og:image" content="http://yoursite.com/uncategorized/设计模式/daili1.png">
<meta property="og:image" content="http://yoursite.com/uncategorized/设计模式/daili3.png">
<meta property="og:image" content="http://yoursite.com/uncategorized/设计模式/daili5.png">
<meta property="og:image" content="http://yoursite.com/uncategorized/设计模式/daili6.png">
<meta property="og:image" content="http://yoursite.com/uncategorized/设计模式/duty1.png">
<meta property="og:image" content="http://yoursite.com/uncategorized/设计模式/duty2.png">
<meta property="og:updated_time" content="2018-07-26T13:02:18.121Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="设计模式">
<meta name="twitter:description" content="这个是读设计模式之禅的读书笔记">
<meta name="twitter:image" content="http://yoursite.com/uncategorized/设计模式/diagram-3798961331217258717.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/uncategorized/设计模式/"/>





  <title>设计模式 | 个人网站</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">个人网站</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/uncategorized/设计模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Groot">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="个人网站">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">设计模式</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-22T23:59:01+08:00">
                2017-03-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>这个是读设计模式之禅的读书笔记</p>
<a id="more"></a>
<h1 id="最重要的几个原则"><a href="#最重要的几个原则" class="headerlink" title="最重要的几个原则"></a>最重要的几个原则</h1><h1 id="设计模式开始前的准备"><a href="#设计模式开始前的准备" class="headerlink" title="设计模式开始前的准备"></a>设计模式开始前的准备</h1><ul>
<li>工具</li>
<li>UML</li>
</ul>
<h1 id="3-单例模式"><a href="#3-单例模式" class="headerlink" title="3.单例模式"></a>3.单例模式</h1><h2 id="3-1-类图"><a href="#3-1-类图" class="headerlink" title="3.1 类图"></a>3.1 类图</h2><p><img src="diagram-3798961331217258717.png" alt="Alt text" title="Optional title"></p>
<h2 id="3-2一个简单的例子"><a href="#3-2一个简单的例子" class="headerlink" title="3.2一个简单的例子"></a>3.2一个简单的例子</h2><ul>
<li><p>皇帝是一个只有一个，是单例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Emperor &#123;</span><br><span class="line">    private  static final Emperor emperor=new Emperor();</span><br><span class="line">    private  Emperor()&#123;&#125;;</span><br><span class="line">    public  static Emperor getIntence()&#123;</span><br><span class="line">        return emperor;</span><br><span class="line">    &#125;</span><br><span class="line">    public static void say()&#123;</span><br><span class="line">        System.out.println(&quot;我是皇帝xxx&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>臣子可以有多个，臣子朝拜皇帝</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class Minister &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        for (int i = 0; i &lt; 30; i++) &#123;</span><br><span class="line">            Emperor emperor=Emperor.getIntence();</span><br><span class="line">            emperor.say();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-3-单例模式的应用"><a href="#3-3-单例模式的应用" class="headerlink" title="3.3 单例模式的应用"></a>3.3 单例模式的应用</h2><h3 id="3-3-1-优点"><a href="#3-3-1-优点" class="headerlink" title="3.3.1 优点"></a>3.3.1 优点</h3><ul>
<li>节约内存</li>
<li>资源共享</li>
</ul>
<h3 id="3-3-2-缺点"><a href="#3-3-2-缺点" class="headerlink" title="3.3.2 缺点"></a>3.3.2 缺点</h3><ul>
<li>拓展困难</li>
<li>单例模式和单一职责原则冲突</li>
</ul>
<h2 id="3-4-单例模式的注意事项"><a href="#3-4-单例模式的注意事项" class="headerlink" title="3.4 单例模式的注意事项"></a>3.4 单例模式的注意事项</h2><h3 id="并发问题"><a href="#并发问题" class="headerlink" title="并发问题"></a>并发问题</h3><ul>
<li><p>饿汉试</p>
<blockquote>
<p>实现创建好，只要get就可以,下面就是一个典型的饿汉式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class Emperor &#123;</span><br><span class="line">  private static final Emperor emperor = new Emperor();</span><br><span class="line">   //初始化 一个 皇帝 private Emperor()&#123;</span><br><span class="line">//世俗 和 道德 约束 你， 目的 就是 不 希望 产生 第二个 皇帝</span><br><span class="line">&#125;</span><br><span class="line">  public static Emperor getInstance()&#123;</span><br><span class="line">   return emperor;</span><br><span class="line">  &#125;</span><br><span class="line">   //皇帝 发话 了</span><br><span class="line">  public static void say()&#123;</span><br><span class="line">  System. out. println(&quot; 我 就是 皇帝 某 某某....&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>懒汉式</p>
<blockquote>
<p>用的时候创建，会发生多线程安全问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class Singleton &#123;</span><br><span class="line">   private static Singleton singleton = null;</span><br><span class="line">    //限制 产生 多个 对象</span><br><span class="line">     private Singleton()&#123;</span><br><span class="line">&#125;</span><br><span class="line">//通过 该 方法 获得 实例 对象</span><br><span class="line"> public static Singleton getSingleton()&#123;</span><br><span class="line">   if( singleton == null)&#123;</span><br><span class="line">      singleton = new Singleton();</span><br><span class="line">      &#125;</span><br><span class="line">    return singleton;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>解决办法：</p>
<ul>
<li>使用饿汉式</li>
<li>使用synchronized</li>
</ul>
</li>
</ul>
<h2 id="3-5-单例模式的拓展"><a href="#3-5-单例模式的拓展" class="headerlink" title="3.5 单例模式的拓展"></a>3.5 单例模式的拓展</h2><h3 id="3-5-1-一个国家有两个皇帝"><a href="#3-5-1-一个国家有两个皇帝" class="headerlink" title="3.5.1 一个国家有两个皇帝"></a>3.5.1 一个国家有两个皇帝</h3><blockquote>
<p>明朝的明英宗朱祁镇和他弟弟明景帝，弟弟忘了让哥哥当太上皇…(⊙o⊙)哦。出现了一国两个主人的情况。皇帝不是什么人想当就能当的，所以这个就是这个对象只可以创建两次，这个怎么处理。</p>
</blockquote>
<h3 id="3-5-2-类图"><a href="#3-5-2-类图" class="headerlink" title="3.5.2 类图"></a>3.5.2 类图</h3><p><img src="diagram-8826285099454707507.png" alt="这个是UML图"></p>
<h3 id="3-5-3-代码"><a href="#3-5-3-代码" class="headerlink" title="3.5.3 代码"></a>3.5.3 代码</h3><ul>
<li>皇帝</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">public class Emperor2 &#123;</span><br><span class="line">    //只有两个皇帝</span><br><span class="line">    public static int maxSizeOfEmperor = 2;</span><br><span class="line">    //创建一个集合用于存储两个皇帝,每个皇帝都有独一无二的名字</span><br><span class="line">    private static ArrayList&lt;Emperor2&gt; emperor2s = new ArrayList&lt;&gt;();</span><br><span class="line">    //创建当前皇帝的名称</span><br><span class="line">    private static ArrayList&lt;String&gt; names = new ArrayList&lt;&gt;();</span><br><span class="line">    //当前皇帝的数量</span><br><span class="line">    private static int size = 0;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    static &#123;</span><br><span class="line"></span><br><span class="line">        for (int i = 0; i &lt; maxSizeOfEmperor; i++) &#123;</span><br><span class="line">            emperor2s.add(new Emperor2(&quot;皇家&quot; + i + &quot;号&quot;));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static int countNumOfEmperor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    private Emperor2(String name) &#123;</span><br><span class="line">        names.add(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    private Emperor2() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">//随机 获得 一个 皇帝 对象</span><br><span class="line">    public static Emperor2 getInstance() &#123;</span><br><span class="line">        Random random = new Random();</span><br><span class="line">        //随机 拉出 一个 皇帝， 只要 是个 精神 领袖 就成</span><br><span class="line">        countNumOfEmperor = random.nextInt(maxSizeOfEmperor);</span><br><span class="line">        return emperor2s.get(countNumOfEmperor);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 皇帝 发话 了</span><br><span class="line">    public static void say() &#123;</span><br><span class="line">        System.out.println(names.get(countNumOfEmperor));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>臣子<blockquote>
<p>没有什么变化</p>
</blockquote>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Minister &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        for (int i = 0; i &lt; 30; i++) &#123;</span><br><span class="line">            Emperor emperor=Emperor.getIntence();</span><br><span class="line">            //为了更加清晰，加入这个：</span><br><span class="line">            System. out. print(&quot; 第&quot;+( i+ 1)+&quot; 个大 臣 参拜 的 是：&quot;);</span><br><span class="line">            emperor.say();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>结果<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">第 1 个大 臣 参拜 的 是： 皇 1 帝</span><br><span class="line">第 2 个大 臣 参拜 的 是： 皇 2 帝</span><br><span class="line">第 3 个大 臣 参拜 的 是： 皇 1 帝</span><br><span class="line">第 4 个大 臣 参拜 的 是： 皇 1 帝</span><br><span class="line">第 5 个大 臣 参拜 的 是： 皇 2 帝</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="3-6-拓展"><a href="#3-6-拓展" class="headerlink" title="3.6 拓展"></a>3.6 拓展</h2><blockquote>
<p>单 例 模式 是 23 个 模式 中 比较 简单 的 模式， 应用 也非 常 广泛， 如在 Spring 中， 每个 Bean 默认 就是 单 例 的， 这样做 的 优点 是 Spring 容器 可以 管理 这些 Bean 的 生命 期， 决定 什么时候 创建 出来， 什么时候 销毁， 销毁 的 时候 要 如何 处理， 等等。 如果 采用 非 单 例 模式（ Prototype 类型）， 则 Bean 初始化 后的 管理 交由 J2EE 容器， Spring 容器 不再 跟踪 管理 Bean 的 生命 周期。</p>
</blockquote>
<h1 id="4-工厂方法模式"><a href="#4-工厂方法模式" class="headerlink" title="4.工厂方法模式"></a>4.工厂方法模式</h1><blockquote>
<p>女娲造人的故事<br>女娲拿出他的八卦炉，然后采集黏土，第一天出炉晚了，造出了黑人。第二天，出炉早了，造出了白人。第三天，火候刚刚好，造出了又香又脆的黄种人…(^o^)/~</p>
</blockquote>
<h2 id="4-1-就上面这个故事，来一波类图"><a href="#4-1-就上面这个故事，来一波类图" class="headerlink" title="4.1 就上面这个故事，来一波类图"></a>4.1 就上面这个故事，来一波类图</h2><p><img src="/diagram-3665263129162863714.png" alt="这个是女娲造人的工厂方法模式UML图"></p>
<h2 id="4-2代码"><a href="#4-2代码" class="headerlink" title="4.2代码"></a>4.2代码</h2><ul>
<li>人这个抽象的东西<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface Human &#123;</span><br><span class="line">      void getColor();</span><br><span class="line">     void tall();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>人的具体实现</p>
<ul>
<li><p>白人</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class WhiteHuman implements Human &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void getColor() &#123;</span><br><span class="line">        System. out. println(&quot; 白色 人白色&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void tall() &#123;</span><br><span class="line">        System. out. println(&quot; 白色 人种 会 说话， 一般 都是 但是 单 字节。&quot;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>黑人</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class BlackHuman implements Human &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void getColor() &#123;</span><br><span class="line">        System. out. println(&quot; 黑色 人黑色&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void tall() &#123;</span><br><span class="line">        System. out. println(&quot; 黑色 人种 会 说话， 一般 都是 但是 单 字节。&quot;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>黄种人</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class YellowHuman implements Human&#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void getColor() &#123;</span><br><span class="line">        System. out. println(&quot; 黄色 人黄色&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void tall() &#123;</span><br><span class="line">         System. out. println(&quot; 黄色 人种 会 说话， 一般 都是 但是 多 字节。&quot;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>八卦炉的抽象</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public abstract class EightTrigramsFurnace &#123;</span><br><span class="line"></span><br><span class="line">    public abstract &lt;T extends Human&gt; T createHuman(Class&lt;T&gt; tClass);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>真正的先天至宝</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class HumanFactory extends EightTrigramsFurnace &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public &lt;T extends Human&gt; T createHuman(Class&lt;T&gt; tClass) &#123;</span><br><span class="line"></span><br><span class="line">        Human human= null;</span><br><span class="line">        try &#123;</span><br><span class="line">            human = (Human) (tClass.forName(tClass.getName())).newInstance();</span><br><span class="line">        &#125; catch (InstantiationException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (IllegalAccessException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; catch (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return (T)human;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>女娲</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class NvWa &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        EightTrigramsFurnace baGuaLu=new HumanFactory();</span><br><span class="line">        //第一次造人</span><br><span class="line">        WhiteHuman whiteHuman = baGuaLu.createHuman(WhiteHuman.class);</span><br><span class="line">        whiteHuman.getColor();</span><br><span class="line">        whiteHuman.tall();</span><br><span class="line"></span><br><span class="line">        //第二次造人</span><br><span class="line">        BlackHuman blackHuman = baGuaLu.createHuman(BlackHuman.class);</span><br><span class="line">        blackHuman.getColor();</span><br><span class="line">        blackHuman.tall();</span><br><span class="line">        //第三次造人</span><br><span class="line"></span><br><span class="line">        YellowHuman yellowHuman = baGuaLu.createHuman(YellowHuman.class);</span><br><span class="line">        yellowHuman.getColor();</span><br><span class="line">        yellowHuman.tall();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>结果</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> 白色 人白色</span><br><span class="line">白色 人种 会 说话， 一般 都是 但是 单 字节。</span><br><span class="line"> 黑色 人黑色</span><br><span class="line"> 黑色 人种 会 说话， 一般 都是 但是 单 字节。</span><br><span class="line"> 黄色 人黄色</span><br><span class="line"> 黄色 人种 会 说话， 一般 都是 但是 多 字节。</span><br></pre></td></tr></table></figure>
<h2 id="4-3-工厂方法的定义和通用类图"><a href="#4-3-工厂方法的定义和通用类图" class="headerlink" title="4.3 工厂方法的定义和通用类图"></a>4.3 工厂方法的定义和通用类图</h2><h3 id="4-3-1-定义"><a href="#4-3-1-定义" class="headerlink" title="4.3.1 定义"></a>4.3.1 定义</h3><blockquote>
<p>为创建一组相关或相互依赖的对象提供一个接口而且无须指定它们的具体类。</p>
</blockquote>
<p><img src="diagram-571852663608358642.png" alt=""></p>
<h3 id="4-3-2-通用类图"><a href="#4-3-2-通用类图" class="headerlink" title="4.3.2 通用类图"></a>4.3.2 通用类图</h3><p><img src="diagram-1634151465328182485.png" alt="抽象工厂模式的通用源码类图" title="抽象工厂模式的通用源码类图"></p>
<p><strong>代码</strong></p>
<hr>
<ul>
<li><p>AbstractProductA  抽象的产品</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public abstract class AbstractProductA &#123;</span><br><span class="line">  //每个 产品 共有 的 方法</span><br><span class="line">  public void shareMethod()&#123; &#125;</span><br><span class="line">  //每个 产品 相同 方法， 不同 实现</span><br><span class="line">   public abstract void doSomething();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ProductA1  产品A1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class ProductA1 extends AbstractProductA &#123;</span><br><span class="line">   public void doSomething() &#123;</span><br><span class="line">     System. out. println(&quot; 产品 A1 的 实现 方法&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ProductA2  产品A2</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class ProductA2 extends AbstractProductA &#123;</span><br><span class="line">   public void doSomething() &#123;</span><br><span class="line">      System. out. println(&quot; 产品 A2 的 实现 方法&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>AbstractCreator 抽象创建者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public abstract class AbstractCreator &#123;</span><br><span class="line">  //创建 A 产品 家族</span><br><span class="line">  public abstract AbstractProductA createProductA();</span><br><span class="line">    //创建 B 产品 家族</span><br><span class="line">  public abstract AbstractProductB createProductB();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Creator1  创建者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Creator1 extends AbstractCreator &#123;</span><br><span class="line">//只 生产 产品 等级 为 1 的 A 产品</span><br><span class="line">public AbstractProductA createProductA() &#123;</span><br><span class="line"> return new ProductA1();</span><br><span class="line"> &#125;</span><br><span class="line"> //只 生产 产品 等级 为 1 的 B 产品</span><br><span class="line">public AbstractProductB createProductB() &#123;</span><br><span class="line">   return new ProductB1();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Creator2</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class Creator2 extends AbstractCreator &#123;</span><br><span class="line">  //只 生产 产品 等级 为 2 的 A 产品</span><br><span class="line">   public AbstractProductA createProductA()</span><br><span class="line">    createProductA() &#123; return new ProductA2();</span><br><span class="line">       //只 生产 产品 等级 为 2 的 B 产品</span><br><span class="line">       public AbstractProductB createProductB() &#123;</span><br><span class="line">         return new ProductB2();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Client</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class Client &#123;</span><br><span class="line">   public static void main( String[] args) &#123;</span><br><span class="line">     //定义 出 两个 工厂</span><br><span class="line">  AbstractCreator creator1 = new Creator1();</span><br><span class="line">  AbstractCreator creator2 = new Creator2();</span><br><span class="line">  //产生 A1 对象</span><br><span class="line">  AbstractProductA a1 = creator1. createProductA();</span><br><span class="line">  //产生 A2 对象</span><br><span class="line">   AbstractProductA a2 = creator2. createProductA();</span><br><span class="line">  //产生 B1 对象</span><br><span class="line">  AbstractProductB b1 = creator1.createProductB();</span><br><span class="line">   //产生 B2 对象</span><br><span class="line">    AbstractProductB b2 =creator2.createProductB();</span><br><span class="line">   /* * 然后 在这里 就可以 为所欲为了... */</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="4-4-运用"><a href="#4-4-运用" class="headerlink" title="4.4 运用"></a>4.4 运用</h2><h3 id="4-4-1-优点"><a href="#4-4-1-优点" class="headerlink" title="4.4.1 优点"></a>4.4.1 优点</h3><p>屏蔽对象创造的细节、可以添加产品内部约束</p>
<h3 id="4-4-2缺点"><a href="#4-4-2缺点" class="headerlink" title="4.4.2缺点"></a>4.4.2缺点</h3><p>拓展不方便，要拓展产品3，改动量特别大</p>
<h1 id="5-模板方法模式"><a href="#5-模板方法模式" class="headerlink" title="5.模板方法模式"></a>5.模板方法模式</h1><h2 id="5-1类图"><a href="#5-1类图" class="headerlink" title="5.1类图"></a>5.1类图</h2><p><img src="diagram-4102033608804864525.png" alt=""></p>
<h2 id="5-2-代码"><a href="#5-2-代码" class="headerlink" title="5.2 代码"></a>5.2 代码</h2><ul>
<li><p>HummerModel  这个是抽象的类，定义了一系列的规范</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public  abstract class HummerModel &#123;</span><br><span class="line">    /* * 首先， 这个 模型 要 能够 被 发动 起来， 别管 是 手摇 发动， 还是 电力 发动， 反正 * 是要 能够 发动 起来，</span><br><span class="line">     那 这个 实现 要在 实现 类 里 了 */</span><br><span class="line">    public abstract void start();</span><br><span class="line">    //能 发动， 还要 能 停下来， 那才 是真 本事</span><br><span class="line">     public abstract void stop();</span><br><span class="line">    // 喇叭 会 出声 音， 是滴滴 叫，还是 哔哔 叫</span><br><span class="line">     public abstract void alarm();</span><br><span class="line">    // 引擎会轰隆隆地响，不响那是假的</span><br><span class="line">     public abstract void engineBoom();</span><br><span class="line">    // 那模型应该会跑吧，别管是人推的，还是电力驱动的，总之要会跑</span><br><span class="line">     public abstract void run();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>HammerModel1</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">public class HammerModel1 extends HummerModel &#123;</span><br><span class="line"></span><br><span class="line">    //H1 型 号的 悍 马车 鸣笛</span><br><span class="line">    public void alarm() &#123;</span><br><span class="line">        System.out.println(&quot; 悍 马 H1 鸣笛...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 引擎 轰鸣 声</span><br><span class="line">    public void engineBoom() &#123;</span><br><span class="line">        System.out.println(&quot; 悍 马 H1 引擎 声音 是 这样 的...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    // 汽车 发动</span><br><span class="line"></span><br><span class="line">    public void start() &#123;</span><br><span class="line">        System.out.println(&quot; 悍 马 H1 发动...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //停车</span><br><span class="line">    public void stop() &#123;</span><br><span class="line">        System.out.println(&quot; 悍 马 H1 停车...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 开动 起来</span><br><span class="line">    public void run() &#123; //先 发动 汽车 this. start();</span><br><span class="line">        // 引擎 开始 轰鸣</span><br><span class="line">        this.engineBoom();</span><br><span class="line">        // 然后 就 开始 跑了， 跑 的 过程中 遇到 一条 狗 挡路， 就按 喇叭</span><br><span class="line">        this.alarm();</span><br><span class="line">        // 到达 目的地 就 停车</span><br><span class="line">        this.stop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>HammerModel2</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">public class HammerModel2 extends HummerModel &#123;</span><br><span class="line"></span><br><span class="line">    //H1 型 号的 悍 马车 鸣笛</span><br><span class="line">    public void alarm() &#123;</span><br><span class="line">        System.out.println(&quot; 悍 马 H2 鸣笛...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 引擎 轰鸣 声</span><br><span class="line">    public void engineBoom() &#123;</span><br><span class="line">        System.out.println(&quot; 悍 马 H2 引擎 声音 是 这样 的...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    // 汽车 发动</span><br><span class="line"></span><br><span class="line">    public void start() &#123;</span><br><span class="line">        System.out.println(&quot; 悍 马 H2 发动...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //停车</span><br><span class="line">    public void stop() &#123;</span><br><span class="line">        System.out.println(&quot; 悍 马 H2 停车...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 开动 起来</span><br><span class="line">    public void run() &#123; //先 发动 汽车 this. start();</span><br><span class="line">        // 引擎 开始 轰鸣</span><br><span class="line">        this.engineBoom();</span><br><span class="line">        // 然后 就 开始 跑了， 跑 的 过程中 遇到 一条 狗 挡路， 就按 喇叭</span><br><span class="line">        this.alarm();</span><br><span class="line">        // 到达 目的地 就 停车</span><br><span class="line">        this.stop();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<blockquote>
<p>发现<code>run()</code>方法重复了，所以在抽象类里面定义<code>run()</code>方法<br>下面是新的HummerModel</p>
</blockquote>
<ul>
<li><p>HummerModel</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public  abstract class HummerModel &#123;</span><br><span class="line">    /* * 首先， 这个 模型 要 能够 被 发动 起来， 别管 是 手摇 发动， 还是 电力 发动， 反正 * 是要 能够 发动 起来，</span><br><span class="line">     那 这个 实现 要在 实现 类 里 了 */</span><br><span class="line">    public abstract void start();</span><br><span class="line">    //能 发动， 还要 能 停下来， 那才 是真 本事</span><br><span class="line">     public abstract void stop();</span><br><span class="line">    // 喇叭 会 出声 音， 是滴滴 叫，还是 哔哔 叫</span><br><span class="line">     public abstract void alarm();</span><br><span class="line">    // 引擎会轰隆隆地响，不响那是假的</span><br><span class="line">     public abstract void engineBoom();</span><br><span class="line"></span><br><span class="line">    // 开动 起来</span><br><span class="line">    public void run() &#123; //先 发动 汽车 this. start();</span><br><span class="line">        // 引擎 开始 轰鸣</span><br><span class="line">        this.engineBoom();</span><br><span class="line">        // 然后 就 开始 跑了， 跑 的 过程中 遇到 一条 狗 挡路， 就按 喇叭</span><br><span class="line">        this.alarm();</span><br><span class="line">        // 到达 目的地 就 停车</span><br><span class="line">        this.stop();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>HammerModel1和HammerModel2就可以不用<code>run()</code>方法,将<code>run()</code>删除就可以</p>
</li>
</ul>
<h2 id="5-3-定义和通用类图"><a href="#5-3-定义和通用类图" class="headerlink" title="5.3 定义和通用类图"></a>5.3 定义和通用类图</h2><h3 id="5-3-1-定义"><a href="#5-3-1-定义" class="headerlink" title="5.3.1 定义"></a>5.3.1 定义</h3><blockquote>
<p>定义：一个操作中的算法的框架，而将一些步骤延迟到子类中。使得子类可以不改变一个算法的结构即可重定义该算法的某些特定步骤。</p>
</blockquote>
<h3 id="5-3-2-通用类图"><a href="#5-3-2-通用类图" class="headerlink" title="5.3.2 通用类图"></a>5.3.2 通用类图</h3><p><img src="diagram-4437561749570370753.png" alt=""></p>
<ul>
<li><p>基本方法</p>
<blockquote>
<p>这个由子类具体实现</p>
</blockquote>
</li>
<li><p>模板方法</p>
<blockquote>
<p>可以有一个或几个，一般是一个具体方法，也就是一个框架，实现对基本方法的调度，完成固定的逻辑。</p>
</blockquote>
</li>
</ul>
<hr>
<ul>
<li>AbstractClass</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public abstract class AbstractClass &#123;</span><br><span class="line">//基本 方法</span><br><span class="line">protected abstract void doSomething();</span><br><span class="line"> //基本 方法</span><br><span class="line">  protected abstract void doAnything();</span><br><span class="line">  //模板 方法</span><br><span class="line">   public void templateMethod()&#123;</span><br><span class="line">   /* * 调用 基本 方法， 完成 相关 的 逻辑 */</span><br><span class="line">   this. doAnything();</span><br><span class="line">  this. doSomething();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ConcreteClass1</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public class ConcreteClass1 extends AbstractClass &#123;</span><br><span class="line">   //实现 基本 方法</span><br><span class="line">    protected void doAnything() &#123;</span><br><span class="line">      //业务 逻辑 处理</span><br><span class="line">      &#125;</span><br><span class="line">      protected void doSomething() &#123;</span><br><span class="line">        //业务 逻辑 处理</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ConcreteClass2</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  public class ConcreteClass2 extends AbstractClass &#123;</span><br><span class="line">    //实现 基本 方法</span><br><span class="line">    protected void doAnything() &#123;</span><br><span class="line">      //业务 逻辑 处理</span><br><span class="line">       &#125;</span><br><span class="line">       protected void doSomething() &#123;</span><br><span class="line">         //业务 逻辑 处理</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Client</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class Client &#123;</span><br><span class="line">   public static void main( String[] args) &#123;</span><br><span class="line">      AbstractClass class1 = new ConcreteClass1();</span><br><span class="line">       AbstractClass class2 = new ConcreteClass2();</span><br><span class="line">        //调用 模板 方法</span><br><span class="line">      class1. templateMethod();</span><br><span class="line">      class2. templateMethod();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-4-应用，okHttp的迭代器就是类似这种结构"><a href="#5-4-应用，okHttp的迭代器就是类似这种结构" class="headerlink" title="5.4 应用，okHttp的迭代器就是类似这种结构"></a>5.4 应用，okHttp的迭代器就是类似这种结构</h2><ul>
<li>分装不可变部分，拓展可变部分，提取公共部分代码，方便维护</li>
</ul>
<h2 id="5-5-拓展"><a href="#5-5-拓展" class="headerlink" title="5.5 拓展,"></a>5.5 拓展,</h2><blockquote>
<p>但是目前的模板方法模式只能执行特定顺序的任务，如果客户要求可以自定义执行任务的顺序，这个就不好了。</p>
</blockquote>
<p><img src="diagram-3780860177776319271.png" alt="改进" title="改进后的UML图"></p>
<p>在抽象类中加入判断语句，子类添加设置参数。<br>在<code>run()</code>中控制顺序<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">final public void run() &#123;</span><br><span class="line">   //先 发动 汽车</span><br><span class="line">this. start();</span><br><span class="line">   //引擎 开始 轰鸣</span><br><span class="line">this. engineBoom();</span><br><span class="line">    //要 让 它 叫 的 就是 就叫， 喇嘛 不想 让 它 响 就不 响</span><br><span class="line">    if( this. isAlarm())&#123;</span><br><span class="line">    this. alarm();</span><br><span class="line">  &#125;</span><br><span class="line">//到达 目的地 就 停车</span><br><span class="line">this. stop();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="5-6-实践"><a href="#5-6-实践" class="headerlink" title="5.6 实践"></a>5.6 实践</h2><blockquote>
<p>可以通过模板类实现父类调用子类的实现，(^o^)/~。当然可以通过传入config来控制方法调用的顺序。</p>
</blockquote>
<h1 id="6-建造者模式"><a href="#6-建造者模式" class="headerlink" title="6.建造者模式"></a>6.建造者模式</h1><blockquote>
<p>如果客户不仅要得到宝马，还要定义它方法执行的顺序，这个时候就会用到建造器，如果使用模板，就会产生一些列的if else</p>
</blockquote>
<h2 id="6-1-简单的类图"><a href="#6-1-简单的类图" class="headerlink" title="6.1 简单的类图"></a>6.1 简单的类图</h2><p><img src="diagram-7547007178137678520.png" alt=""></p>
<h2 id="6-2代码部分"><a href="#6-2代码部分" class="headerlink" title="6.2代码部分"></a>6.2代码部分</h2><ul>
<li>CarModel<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public abstract class CarModel &#123;</span><br><span class="line">    //方法执行的顺序</span><br><span class="line">    private ArrayList&lt;String&gt; sequence = new ArrayList&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">    //模型能跑动了</span><br><span class="line">    protected abstract void start();</span><br><span class="line"></span><br><span class="line">    //能够停止</span><br><span class="line">    protected abstract void stop();</span><br><span class="line"></span><br><span class="line">    //喇叭发生</span><br><span class="line">    protected abstract void alarm();</span><br><span class="line"></span><br><span class="line">    //汽车引擎声音</span><br><span class="line">    protected abstract void engineBoom();</span><br><span class="line"></span><br><span class="line">    final public void run() &#123;</span><br><span class="line">        for (String actionName : sequence) &#123;</span><br><span class="line"></span><br><span class="line">            if (actionName.equalsIgnoreCase(&quot; start&quot;)) &#123;</span><br><span class="line">                this.start();</span><br><span class="line">                //启动 汽车</span><br><span class="line">            &#125; else if (</span><br><span class="line">                    actionName.equalsIgnoreCase(&quot; stop&quot;)) &#123;</span><br><span class="line">                this.stop();</span><br><span class="line">                //停止 汽车</span><br><span class="line">            &#125; else if (actionName.equalsIgnoreCase(&quot; alarm&quot;)) &#123;</span><br><span class="line">                this.alarm();</span><br><span class="line">                //喇叭 开始 叫 了</span><br><span class="line">            &#125; else if (actionName.equalsIgnoreCase(&quot; engine boom&quot;)) &#123;</span><br><span class="line">                this.engineBoom();</span><br><span class="line">                //引擎 开始 轰鸣</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //把 传递 过 来的 值 传递 到 类 内</span><br><span class="line">    final public void setSequence(ArrayList sequence) &#123;</span><br><span class="line">        this.sequence = sequence;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="6-3-优化后的类图"><a href="#6-3-优化后的类图" class="headerlink" title="6.3 优化后的类图"></a>6.3 优化后的类图</h2><blockquote>
<p>如果每个汽车有一万个部件，他的启动顺序不一致，这个时候采用上面的办法就特别麻烦，这个时候就可以考虑建造者模式</p>
</blockquote>
<p><img src="diagram-3601485860820498926.png" alt=""></p>
<h1 id="7-代理模式"><a href="#7-代理模式" class="headerlink" title="7.代理模式"></a>7.代理模式</h1><h2 id="7-1-引入"><a href="#7-1-引入" class="headerlink" title="7.1 引入"></a>7.1 引入</h2><blockquote>
<p>玩一个游戏，后面不想自己辛苦的练级，就请了代练。</p>
</blockquote>
<h2 id="7-2-自己玩游戏"><a href="#7-2-自己玩游戏" class="headerlink" title="7.2  自己玩游戏"></a>7.2  自己玩游戏</h2><h3 id="7-2-1-类图"><a href="#7-2-1-类图" class="headerlink" title="7.2.1 类图"></a>7.2.1 类图</h3><p><img src="diagram-2081383269360776681.png" alt=""></p>
<h2 id="7-3-自己做老板让别人代练"><a href="#7-3-自己做老板让别人代练" class="headerlink" title="7.3 自己做老板让别人代练"></a>7.3 自己做老板让别人代练</h2><h3 id="7-3-1-类图"><a href="#7-3-1-类图" class="headerlink" title="7.3.1 类图"></a>7.3.1 类图</h3><p><img src="daili.png" alt=""></p>
<h3 id="7-3-2-简单描述"><a href="#7-3-2-简单描述" class="headerlink" title="7.3.2 简单描述"></a>7.3.2 简单描述</h3><p>游戏代理类实现和游戏玩家的一样的接口，然后每个方法其实是调用游戏玩家的方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class GamePlayerProxy implements IGamePlayer &#123;</span><br><span class="line">private IGamePlayer gamePlayer = null;</span><br><span class="line"> //通过 构造 函数 传递 要对 谁 进行 代 练</span><br><span class="line"> public GamePlayerProxy( IGamePlayer _gamePlayer)&#123;</span><br><span class="line">   this. gamePlayer = _gamePlayer;</span><br><span class="line">  &#125;</span><br><span class="line">    //代 练 杀 怪</span><br><span class="line">  public void killBoss() &#123;</span><br><span class="line">      this. gamePlayer. killBoss();</span><br><span class="line">  &#125;</span><br><span class="line">       //代 练 登录</span><br><span class="line">  public void login( String user, String password) &#123;</span><br><span class="line">         this. gamePlayer. login( user, password);</span><br><span class="line">  &#125;</span><br><span class="line">  //代 练 升级</span><br><span class="line">  public void upgrade() &#123;</span><br><span class="line">  this. gamePlayer. upgrade();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="7-4-通用类图"><a href="#7-4-通用类图" class="headerlink" title="7.4 通用类图"></a>7.4 通用类图</h3><p><img src="daili1.png" alt=""></p>
<h3 id="7-5-强制代理"><a href="#7-5-强制代理" class="headerlink" title="7.5 强制代理"></a>7.5 强制代理</h3><p><img src="daili3.png" alt=""></p>
<ul>
<li><p>IGamePlayer</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public interface IGamePlayer &#123;</span><br><span class="line">    //登录 游戏</span><br><span class="line">    public void login(String user, String password);</span><br><span class="line"></span><br><span class="line">    //杀 怪， 这是 网络 游戏 的 主要 特色</span><br><span class="line">    public void killBoss();</span><br><span class="line"></span><br><span class="line">    // 升级</span><br><span class="line">    public void upgrade();</span><br><span class="line"></span><br><span class="line">    // 每个人 都可以 找 一下 自己的 代理</span><br><span class="line">    public IGamePlayer getProxy();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>GamePlayerProxy</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public class GamePlayerProxy implements IGamePlayer &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void login(String user, String password) &#123;</span><br><span class="line">        this.gamePlayer.login(user,password);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void killBoss() &#123;</span><br><span class="line">        this.gamePlayer.killBoss();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void upgrade() &#123;</span><br><span class="line">        this.gamePlayer.upgrade();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public IGamePlayer getProxy() &#123;</span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private IGamePlayer gamePlayer = null;</span><br><span class="line"></span><br><span class="line">    //构造 函数 传递 用 户名</span><br><span class="line">    public GamePlayerProxy(IGamePlayer _gamePlayer) &#123;</span><br><span class="line">        this.gamePlayer = _gamePlayer;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>GamePlayer</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">public class GamePlayer implements IGamePlayer &#123;</span><br><span class="line">    private String name = &quot;&quot;;</span><br><span class="line">    //我的 代理 是 谁</span><br><span class="line">    private IGamePlayer proxy = null;</span><br><span class="line"></span><br><span class="line">    public GamePlayer(String _name) &#123;</span><br><span class="line">        this.name = _name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //找到 自己的 代理</span><br><span class="line">    public IGamePlayer getProxy() &#123;</span><br><span class="line">        this.proxy = new GamePlayerProxy(this);</span><br><span class="line">        return this.proxy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //打 怪， 最 期望 的 就是 杀 老 怪</span><br><span class="line">    public void killBoss() &#123;</span><br><span class="line">        if (this.isProxy()) &#123;</span><br><span class="line">            System.out.println(this.name + &quot;在打 怪！&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            System.out.println(&quot; 请使用 指定 的 代理 访问&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //进 游戏 之前 你 肯定 要 登录 吧， 这是 一个 必要条件</span><br><span class="line">    public void login(String user, String password) &#123;</span><br><span class="line">        if (this.isProxy()) &#123;</span><br><span class="line">            System.out.println(&quot; 登录 名为&quot; + user + &quot; 的 用户&quot; + this.name + &quot; 登录 成功！&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            System.out.println(&quot; 请使用 指定 的 代理 访问&quot;);</span><br><span class="line">            ;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //升级， 升级 有很 多 方法， 花钱 买 是 一种， 做 任务 也是 一种</span><br><span class="line">    public void upgrade() &#123;</span><br><span class="line">        if (this.isProxy()) &#123;</span><br><span class="line">            System.out.println(this.name + &quot; 又 升了 一级！&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            System.out.println(&quot; 请使用 指定 的 代理 访问&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //校验 是否 是 代理 访问</span><br><span class="line">    private boolean isProxy() &#123;</span><br><span class="line">        if (this.proxy == null) &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Client<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">public class Client &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        &lt;!-- //定义 一个 游戏 的 角色</span><br><span class="line">        IGamePlayer player = new GamePlayer(&quot; 张三&quot;);</span><br><span class="line">        // 然后 再 定义 一个 代 练 者</span><br><span class="line">        IGamePlayer proxy = new GamePlayerProxy(player); --&gt;</span><br><span class="line">        //定义 一个 游戏 的 角色  必须使用这个</span><br><span class="line">         IGamePlayer player = new GamePlayer(&quot; 张三&quot;);</span><br><span class="line">        // 获得 指定 的 代理</span><br><span class="line">         IGamePlayer proxy = player. getProxy();</span><br><span class="line">        // 开始 打 游戏， 记下 时间 戳</span><br><span class="line">        System.out.println(&quot; 开始时 间 是： 2009- 8- 25 10: 45&quot;);</span><br><span class="line">        proxy.login(&quot; zhangSan&quot;, &quot;password&quot;);</span><br><span class="line">        // 开始 杀 怪</span><br><span class="line">        proxy.killBoss();</span><br><span class="line"></span><br><span class="line">        //升级</span><br><span class="line">        proxy.upgrade();</span><br><span class="line">        // 记录 结束 游戏 时间</span><br><span class="line">        System.out.println(&quot; 结束 时间 是： 2009- 8- 26 03: 40&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="7-4个性代理类"><a href="#7-4个性代理类" class="headerlink" title="7.4个性代理类"></a>7.4个性代理类</h2><h3 id="7-4-1-类图"><a href="#7-4-1-类图" class="headerlink" title="7.4.1 类图"></a>7.4.1 类图</h3><p><img src="daili5.png" alt=""></p>
<h3 id="7-4-2"><a href="#7-4-2" class="headerlink" title="7.4.2"></a>7.4.2</h3><p>通过让代理类实现新的接口增加功能，实现由个性的代理类</p>
<h2 id="7-5-代理的核心：-动态代理"><a href="#7-5-代理的核心：-动态代理" class="headerlink" title="7.5 代理的核心： 动态代理"></a>7.5 代理的核心： 动态代理</h2><h3 id="7-5-1-类图"><a href="#7-5-1-类图" class="headerlink" title="7.5.1 类图"></a>7.5.1 类图</h3><p><img src="daili6.png" alt=""></p>
<h1 id="8-原型模式"><a href="#8-原型模式" class="headerlink" title="8 原型模式"></a>8 原型模式</h1><blockquote>
<p>就是实现java的clone接口,如果有大量的对象 可以通过clone的方式减小内存消耗</p>
</blockquote>
<h1 id="9-中介模式"><a href="#9-中介模式" class="headerlink" title="9. 中介模式"></a>9. 中介模式</h1><blockquote>
<p>类似mvp<br>model和view不能直接通信 需要通过中介 presenter来通讯，但是如果中介的东西太多就会导致中介机构庞大，难以维护</p>
</blockquote>
<h1 id="10-命令模式"><a href="#10-命令模式" class="headerlink" title="10. 命令模式"></a>10. 命令模式</h1><h1 id="11-责任链模式"><a href="#11-责任链模式" class="headerlink" title="11.责任链模式"></a>11.责任链模式</h1><blockquote>
<p>古代妇女的三从四德…  okhttp的请求封装都是责任链模式</p>
</blockquote>
<h2 id="11-1-类图"><a href="#11-1-类图" class="headerlink" title="11.1 类图"></a>11.1 类图</h2><p><img src="duty1.png" alt=""><br>父亲收到女儿的请求，看是不是自己处理 不是将请求转发给女儿的Husband 然后在转发到son手中</p>
<h2 id="11-2-通用类图"><a href="#11-2-通用类图" class="headerlink" title="11.2 通用类图"></a>11.2 通用类图</h2><p><img src="duty2.png" alt=""></p>
<h1 id="12-装饰者模式"><a href="#12-装饰者模式" class="headerlink" title="12.装饰者模式"></a>12.装饰者模式</h1><blockquote>
<p>一种特殊的代理模式现在终于明白了</p>
</blockquote>
<h1 id="13-策略模式"><a href="#13-策略模式" class="headerlink" title="13.策略模式"></a>13.策略模式</h1>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/uncategorized/Android软件安全与逆向分析入门/" rel="next" title="Android软件安全与逆向分析入门">
                <i class="fa fa-chevron-left"></i> Android软件安全与逆向分析入门
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/uncategorized/深入理解Android虚拟机/" rel="prev" title="深入理解Android虚拟机">
                深入理解Android虚拟机 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Groot</p>
              <p class="site-description motion-element" itemprop="description">尽信书则不如无书</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">53</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">21</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#最重要的几个原则"><span class="nav-number">1.</span> <span class="nav-text">最重要的几个原则</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#设计模式开始前的准备"><span class="nav-number">2.</span> <span class="nav-text">设计模式开始前的准备</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-单例模式"><span class="nav-number">3.</span> <span class="nav-text">3.单例模式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-类图"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 类图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2一个简单的例子"><span class="nav-number">3.2.</span> <span class="nav-text">3.2一个简单的例子</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-单例模式的应用"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 单例模式的应用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-1-优点"><span class="nav-number">3.3.1.</span> <span class="nav-text">3.3.1 优点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-2-缺点"><span class="nav-number">3.3.2.</span> <span class="nav-text">3.3.2 缺点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-单例模式的注意事项"><span class="nav-number">3.4.</span> <span class="nav-text">3.4 单例模式的注意事项</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#并发问题"><span class="nav-number">3.4.1.</span> <span class="nav-text">并发问题</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-5-单例模式的拓展"><span class="nav-number">3.5.</span> <span class="nav-text">3.5 单例模式的拓展</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-1-一个国家有两个皇帝"><span class="nav-number">3.5.1.</span> <span class="nav-text">3.5.1 一个国家有两个皇帝</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-2-类图"><span class="nav-number">3.5.2.</span> <span class="nav-text">3.5.2 类图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-3-代码"><span class="nav-number">3.5.3.</span> <span class="nav-text">3.5.3 代码</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-6-拓展"><span class="nav-number">3.6.</span> <span class="nav-text">3.6 拓展</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-工厂方法模式"><span class="nav-number">4.</span> <span class="nav-text">4.工厂方法模式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#4-1-就上面这个故事，来一波类图"><span class="nav-number">4.1.</span> <span class="nav-text">4.1 就上面这个故事，来一波类图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-2代码"><span class="nav-number">4.2.</span> <span class="nav-text">4.2代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-3-工厂方法的定义和通用类图"><span class="nav-number">4.3.</span> <span class="nav-text">4.3 工厂方法的定义和通用类图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-1-定义"><span class="nav-number">4.3.1.</span> <span class="nav-text">4.3.1 定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-2-通用类图"><span class="nav-number">4.3.2.</span> <span class="nav-text">4.3.2 通用类图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-4-运用"><span class="nav-number">4.4.</span> <span class="nav-text">4.4 运用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-1-优点"><span class="nav-number">4.4.1.</span> <span class="nav-text">4.4.1 优点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-2缺点"><span class="nav-number">4.4.2.</span> <span class="nav-text">4.4.2缺点</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-模板方法模式"><span class="nav-number">5.</span> <span class="nav-text">5.模板方法模式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1类图"><span class="nav-number">5.1.</span> <span class="nav-text">5.1类图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2-代码"><span class="nav-number">5.2.</span> <span class="nav-text">5.2 代码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-3-定义和通用类图"><span class="nav-number">5.3.</span> <span class="nav-text">5.3 定义和通用类图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-1-定义"><span class="nav-number">5.3.1.</span> <span class="nav-text">5.3.1 定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-2-通用类图"><span class="nav-number">5.3.2.</span> <span class="nav-text">5.3.2 通用类图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-4-应用，okHttp的迭代器就是类似这种结构"><span class="nav-number">5.4.</span> <span class="nav-text">5.4 应用，okHttp的迭代器就是类似这种结构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-5-拓展"><span class="nav-number">5.5.</span> <span class="nav-text">5.5 拓展,</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-6-实践"><span class="nav-number">5.6.</span> <span class="nav-text">5.6 实践</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-建造者模式"><span class="nav-number">6.</span> <span class="nav-text">6.建造者模式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#6-1-简单的类图"><span class="nav-number">6.1.</span> <span class="nav-text">6.1 简单的类图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-2代码部分"><span class="nav-number">6.2.</span> <span class="nav-text">6.2代码部分</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-3-优化后的类图"><span class="nav-number">6.3.</span> <span class="nav-text">6.3 优化后的类图</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#7-代理模式"><span class="nav-number">7.</span> <span class="nav-text">7.代理模式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#7-1-引入"><span class="nav-number">7.1.</span> <span class="nav-text">7.1 引入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-2-自己玩游戏"><span class="nav-number">7.2.</span> <span class="nav-text">7.2  自己玩游戏</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-1-类图"><span class="nav-number">7.2.1.</span> <span class="nav-text">7.2.1 类图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-3-自己做老板让别人代练"><span class="nav-number">7.3.</span> <span class="nav-text">7.3 自己做老板让别人代练</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3-1-类图"><span class="nav-number">7.3.1.</span> <span class="nav-text">7.3.1 类图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3-2-简单描述"><span class="nav-number">7.3.2.</span> <span class="nav-text">7.3.2 简单描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-4-通用类图"><span class="nav-number">7.3.3.</span> <span class="nav-text">7.4 通用类图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-5-强制代理"><span class="nav-number">7.3.4.</span> <span class="nav-text">7.5 强制代理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-4个性代理类"><span class="nav-number">7.4.</span> <span class="nav-text">7.4个性代理类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-4-1-类图"><span class="nav-number">7.4.1.</span> <span class="nav-text">7.4.1 类图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-4-2"><span class="nav-number">7.4.2.</span> <span class="nav-text">7.4.2</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-5-代理的核心：-动态代理"><span class="nav-number">7.5.</span> <span class="nav-text">7.5 代理的核心： 动态代理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-5-1-类图"><span class="nav-number">7.5.1.</span> <span class="nav-text">7.5.1 类图</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#8-原型模式"><span class="nav-number">8.</span> <span class="nav-text">8 原型模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#9-中介模式"><span class="nav-number">9.</span> <span class="nav-text">9. 中介模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#10-命令模式"><span class="nav-number">10.</span> <span class="nav-text">10. 命令模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#11-责任链模式"><span class="nav-number">11.</span> <span class="nav-text">11.责任链模式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#11-1-类图"><span class="nav-number">11.1.</span> <span class="nav-text">11.1 类图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#11-2-通用类图"><span class="nav-number">11.2.</span> <span class="nav-text">11.2 通用类图</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#12-装饰者模式"><span class="nav-number">12.</span> <span class="nav-text">12.装饰者模式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#13-策略模式"><span class="nav-number">13.</span> <span class="nav-text">13.策略模式</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Groot</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
